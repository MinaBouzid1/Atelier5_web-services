<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Liste des Prix Journaliers</h2>
    <a routerLink="/prix/new" class="btn btn-warning">
      <i class="bi bi-plus-circle"></i> Nouveau Prix
    </a>
  </div>

  <!-- Filters -->
  <div class="row mb-4">
    <div class="col-md-4">
      <label class="form-label">Filtrer par Station</label>
      <select class="form-select" [(ngModel)]="selectedStationId">
        <option [value]="undefined">Toutes les stations</option>
        <option *ngFor="let station of stations" [value]="station.id">
          {{ station.nom }}
        </option>
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Filtrer par Date</label>
      <input type="date" class="form-control" [(ngModel)]="selectedDate">
    </div>
    <div class="col-md-4 d-flex align-items-end">
      <button class="btn btn-primary me-2" (click)="filterPrix()">
        <i class="bi bi-funnel"></i> Filtrer
      </button>
      <button class="btn btn-secondary" (click)="resetFilter()">
        <i class="bi bi-arrow-clockwise"></i> Réinitialiser
      </button>
    </div>
  </div>

  <!-- Table -->
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Station</th>
        <th>Carburant</th>
        <th>Date</th>
        <th>Prix (MAD)</th>
        <th>Remarque</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let p of prix">
        <td>{{ p.id }}</td>
        <td>{{ p.station?.nom }}</td>
        <td>
          <span class="badge bg-info">{{ p.carburant?.type }}</span>
        </td>
        <td>{{ p.date | date:'dd/MM/yyyy' }}</td>
        <td>
          <strong>{{ p.prix | number:'1.2-2' }} MAD</strong>
        </td>
        <td>{{ p.remarque }}</td>
        <td>
          <a [routerLink]="['/prix/edit', p.id]" class="btn btn-sm btn-warning me-2">
            <i class="bi bi-pencil"></i> Modifier
          </a>
          <button (click)="deletePrix(p.id)" class="btn btn-sm btn-danger">
            <i class="bi bi-trash"></i> Supprimer
          </button>
        </td>
      </tr>
      <tr *ngIf="prix.length === 0">
        <td colspan="7" class="text-center">Aucun prix trouvé</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
